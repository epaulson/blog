<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="author" content="Erik Paulson">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
        <title>What this blog will be about | Erik Paulson's Blog</title>

        <link rel="alternate" type="application/atom+xml" title="Erik Paulson's Blog blog atom feed" href="/feeds/all.atom.xml" />
        <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700' rel='stylesheet' type='text/css'>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
        <style>.codehilite .hll { background-color: #404040 }
.codehilite .c { color: #999999; font-style: italic } /* Comment */
.codehilite .err { color: #a61717; background-color: #e3d2d2 } /* Error */
.codehilite .g { color: #d0d0d0 } /* Generic */
.codehilite .k { color: #6ab825; font-weight: bold } /* Keyword */
.codehilite .l { color: #d0d0d0 } /* Literal */
.codehilite .n { color: #d0d0d0 } /* Name */
.codehilite .o { color: #d0d0d0 } /* Operator */
.codehilite .x { color: #d0d0d0 } /* Other */
.codehilite .p { color: #d0d0d0 } /* Punctuation */
.codehilite .cm { color: #999999; font-style: italic } /* Comment.Multiline */
.codehilite .cp { color: #cd2828; font-weight: bold } /* Comment.Preproc */
.codehilite .c1 { color: #999999; font-style: italic } /* Comment.Single */
.codehilite .cs { color: #e50808; font-weight: bold; background-color: #520000 } /* Comment.Special */
.codehilite .gd { color: #d22323 } /* Generic.Deleted */
.codehilite .ge { color: #d0d0d0; font-style: italic } /* Generic.Emph */
.codehilite .gr { color: #d22323 } /* Generic.Error */
.codehilite .gh { color: #ffffff; font-weight: bold } /* Generic.Heading */
.codehilite .gi { color: #589819 } /* Generic.Inserted */
.codehilite .go { color: #cccccc } /* Generic.Output */
.codehilite .gp { color: #aaaaaa } /* Generic.Prompt */
.codehilite .gs { color: #d0d0d0; font-weight: bold } /* Generic.Strong */
.codehilite .gu { color: #ffffff; text-decoration: underline } /* Generic.Subheading */
.codehilite .gt { color: #d22323 } /* Generic.Traceback */
.codehilite .kc { color: #6ab825; font-weight: bold } /* Keyword.Constant */
.codehilite .kd { color: #6ab825; font-weight: bold } /* Keyword.Declaration */
.codehilite .kn { color: #6ab825; font-weight: bold } /* Keyword.Namespace */
.codehilite .kp { color: #6ab825 } /* Keyword.Pseudo */
.codehilite .kr { color: #6ab825; font-weight: bold } /* Keyword.Reserved */
.codehilite .kt { color: #6ab825; font-weight: bold } /* Keyword.Type */
.codehilite .ld { color: #d0d0d0 } /* Literal.Date */
.codehilite .m { color: #3677a9 } /* Literal.Number */
.codehilite .s { color: #ed9d13 } /* Literal.String */
.codehilite .na { color: #bbbbbb } /* Name.Attribute */
.codehilite .nb { color: #24909d } /* Name.Builtin */
.codehilite .nc { color: #447fcf; text-decoration: underline } /* Name.Class */
.codehilite .no { color: #40ffff } /* Name.Constant */
.codehilite .nd { color: #ffa500 } /* Name.Decorator */
.codehilite .ni { color: #d0d0d0 } /* Name.Entity */
.codehilite .ne { color: #bbbbbb } /* Name.Exception */
.codehilite .nf { color: #447fcf } /* Name.Function */
.codehilite .nl { color: #d0d0d0 } /* Name.Label */
.codehilite .nn { color: #447fcf; text-decoration: underline } /* Name.Namespace */
.codehilite .nx { color: #d0d0d0 } /* Name.Other */
.codehilite .py { color: #d0d0d0 } /* Name.Property */
.codehilite .nt { color: #6ab825; font-weight: bold } /* Name.Tag */
.codehilite .nv { color: #40ffff } /* Name.Variable */
.codehilite .ow { color: #6ab825; font-weight: bold } /* Operator.Word */
.codehilite .w { color: #666666 } /* Text.Whitespace */
.codehilite .mf { color: #3677a9 } /* Literal.Number.Float */
.codehilite .mh { color: #3677a9 } /* Literal.Number.Hex */
.codehilite .mi { color: #3677a9 } /* Literal.Number.Integer */
.codehilite .mo { color: #3677a9 } /* Literal.Number.Oct */
.codehilite .sb { color: #ed9d13 } /* Literal.String.Backtick */
.codehilite .sc { color: #ed9d13 } /* Literal.String.Char */
.codehilite .sd { color: #ed9d13 } /* Literal.String.Doc */
.codehilite .s2 { color: #ed9d13 } /* Literal.String.Double */
.codehilite .se { color: #ed9d13 } /* Literal.String.Escape */
.codehilite .sh { color: #ed9d13 } /* Literal.String.Heredoc */
.codehilite .si { color: #ed9d13 } /* Literal.String.Interpol */
.codehilite .sx { color: #ffa500 } /* Literal.String.Other */
.codehilite .sr { color: #ed9d13 } /* Literal.String.Regex */
.codehilite .s1 { color: #ed9d13 } /* Literal.String.Single */
.codehilite .ss { color: #ed9d13 } /* Literal.String.Symbol */
.codehilite .bp { color: #24909d } /* Name.Builtin.Pseudo */
.codehilite .vc { color: #40ffff } /* Name.Variable.Class */
.codehilite .vg { color: #40ffff } /* Name.Variable.Global */
.codehilite .vi { color: #40ffff } /* Name.Variable.Instance */
.codehilite .il { color: #3677a9 } /* Literal.Number.Integer.Long */</style>
        <style>body{margin:0;padding:0;font:15px 'Source Sans Pro',sans-serif;line-height:1.6em;color:#222;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased}a{color:#007ee5;text-decoration:none}a:hover{color:#007ee5;text-decoration:none}header.main-header{background:none repeat scroll 0% 0% #2A66C0;margin-bottom:0px}header.main-header a{color:#fff}header.main-header .container{max-width:1000px}header.main-header .container nav a:hover{background-color:#2A66C0}article{margin:0}article header{margin-bottom:20px;padding-bottom:20px}article header h1{margin-bottom:2px;font-weight:700;color:#000}article header time{color:#9E9E9E;font-size:0.85em;float:right}article header time.left{color:#9E9E9E;font-size:0.85em;float:left}article p{font-size:16px;margin-bottom:20px;line-height:1.6em}article p.note{background:#f5f5f5;border:1px solid #ddd;padding:0.533em 0.733em}article p.update{background-color:#FEEFB3;border:1px solid #e6e68a;padding:0.533em 0.733em}article p.alert{background-color:#ffe2e2;border:1px solid #ffb2b2;padding:0.533em 0.733em}article ul,article ol{margin-top:0px;margin-bottom:25px}article li{font-size:16px;line-height:1.6em}article a:hover{text-decoration:underline}article blockquote{border-left:2px solid #c7c7cc;color:#666;margin:30px 0;padding:0 0 0 25px}article img{max-width:100%}article code{color:#333;background-color:#EEE;border-radius:0;font-size:13px}article .codehilite pre{border-radius:0;background-color:#202020;color:#d0d0d0}article .codehilite pre code{border:none}article .codehilite pre.bash{background-color:#000;color:#FFF}article .meta{font-size:11px}article .meta a:hover{text-decoration:none}article .meta div{margin-bottom:20px;display:block}article .meta a.tag{margin:0 10px 10px 0;padding:1px 12px;display:inline-block;font-size:12px;color:rgba(0,0,0,0.6);background:rgba(0,0,0,0.05)}article .meta a.tag:hover{background:rgba(0,0,0,0.15)}article .meta a.read_more,article .meta a.comments_btn{font-size:14px;font-weight:800;padding:10px 20px;color:#007EE5;background:#FFF;border:1px solid #007EE5}article .meta a.read_more:hover,article .meta a.comments_btn:hover{color:#FFF;background:#007EE5}.index{max-width:900px}.index article header h2{font-size:36px;margin-bottom:2px;font-weight:900}.index article header h2 a{color:#000}.index article header h2 a:hover{color:#007ee5;text-decoration:none}.index .separator{padding:40px 0 0 0;margin:0 0 40px 0;height:10px;border-bottom:solid 1px #CCC}.index .pagination{display:block;margin-bottom:100px}.index .pagination .left{text-align:right}.index .pagination .right{text-align:left}.index .pagination a{display:inline-block;border:2px solid #007EE5;margin:0 5px;padding:8px 20px;font-weight:bold;color:#007EE5}.index .pagination a:hover{color:#FFF;background:#007EE5}.post{max-width:900px}.post h2:before{content:"# ";font-weight:bold;color:#DDD}.post h3:before{content:"## ";font-weight:bold;color:#DDD}.post h4:before{content:"### ";font-weight:bold;color:#DDD}.post article .meta{margin:50px 0 100px}.list{max-width:900px}.list ul.double-list{margin:0 auto 60px;padding:0;list-style-type:none}.list ul.double-list li{padding:5px 0}.list ul.double-list li h2{font-size:1em;display:inline;font-weight:normal}.list ul.double-list li span{font-family:sans-serif;text-transform:uppercase;text-align:right;float:right;padding-top:3px;font-size:12px;color:#999}.full-width-content{padding-top:10px;padding-left:0px;padding-right:0px;margin-left:-20px;margin-right:-20px}.col-xs-1,.col-sm-1,.col-md-1,.col-lg-1,.col-xs-2,.col-sm-2,.col-md-2,.col-lg-2,.col-xs-3,.col-sm-3,.col-md-3,.col-lg-3,.col-xs-4,.col-sm-4,.col-md-4,.col-lg-4,.col-xs-5,.col-sm-5,.col-md-5,.col-lg-5,.col-xs-6,.col-sm-6,.col-md-6,.col-lg-6,.col-xs-7,.col-sm-7,.col-md-7,.col-lg-7,.col-xs-8,.col-sm-8,.col-md-8,.col-lg-8,.col-xs-9,.col-sm-9,.col-md-9,.col-lg-9,.col-xs-10,.col-sm-10,.col-md-10,.col-lg-10,.col-xs-11,.col-sm-11,.col-md-11,.col-lg-11,.col-xs-12,.col-sm-12,.col-md-12,.col-lg-12{padding-right:0px;padding-left:0px}</style>


        <meta property="og:title" content="What this blog will be about" />
        <meta property="og:type" content="article" />
        <meta property="og:url" content="http://blog.unit1127.com/blog/2013/05/27/first-post/" />
        <meta property="og:description" content="Some Motivation The other day, I woke up with what I thought would be a simple task: &#34;Let&#39;s figure out how hard would it be to store the edit log of the Hadoop NameNode in a relational database.&#34; After all, I knew the NameNode already had multiple options for storing â€¦" />
        <meta property="og:locale" content="" />
        <meta property="og:site_name" content="Erik Paulson&#39;s Blog" />
        <meta property="article:published_time" content="2013-05-27" />
        <meta property="article:section" content="Namenode" />

    </head>

    <body>
        <header class="navbar navbar-static-top bs-docs-nav main-header">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand" href="/" title="Home" class="title">Erik Paulson</a></li>
                </div>
                <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
                    <ul class="nav navbar-nav navbar-right">
                            <li><a href="/pages/about.html" title="About">About</a></li>
                    </ul>
                </nav>
            </div>
        </header>

        <div id="wrap">
<div class="container post">
    <article>
        <header>
            <h1>What this blog will be about</h1>
            <time datetime="article.date.isoformat()" pubdate>Mon 27 May 2013</time>
        </header>

        <div class="article_content">
            <!-- PELICAN_BEGIN_SUMMARY -->

<h3>Some Motivation</h3>
<p>The other day, I woke up with what I thought would be a simple task: "Let's figure out how hard would it be to store the edit log of the Hadoop NameNode in a relational database." 
After all, I knew the NameNode already had multiple options for storing its edit log, either by putting in on disk itself, or by using the Quorum Journal Manager. 
This should be task of just finding the right class and either slipping in a new subclass or implementing some interface. </p>
<p>Of course, nothing is ever that simple.
<!-- PELICAN_END_SUMMARY --></p>
<p>We'll return to the relational database storage at some point in the future (and yes, I'm aware of <a href="https://github.com/lalithsuresh/Scaling-HDFS-NameNode">KTHFS</a>.) Today I want to write about a bigger problem.</p>
<h3>Developer Documentation</h3>
<p>Finding good information on the Hadoop internals is hard, which might seem strange given how much Hadoop information is out there. Just to be clear, there's a couple of things that I'm explicitly not looking for. </p>
<p>Obviously, with this much hype around Big Data, there's a lot written about what Hadoop is and where it's going in the press and in blogs. Some of it's really good, and some of it is overblown filler about how Hadoop and Big Data are eventually going to drive my car, pick out my clothes in the morning, find me friends to hang out with that night, and replace every part of my computing ecosystem and also give me unicorn. This isn't my focus</p>
<p>I'm also not looking for material on how to use Hadoop. For that, you really should begin and end your search with <a href="https://twitter.com/tom_e_white">Tom White</a>'s book <a href="http://hadoopbook.com/">Hadoop: The Definitive Guide</a> and <a href="https://twitter.com/esammer">Eric Sammer</a>'s book <a href="http://www.amazon.com/Hadoop-Operations-Eric-Sammer/dp/1449327052">Hadoop Operations</a>. If you want to go a little further, there are any number of Hadoop tutorials or blog posts on "how to write WordCount in MapReduce." (And if you're thinking about writing yet another "how to write WordCount in MapReduce" blog post, please reconsider and think if there isn't <a href="http://en.wikipedia.org/wiki/Cognitive_Surplus">something better</a> you can do. There's certainly room for more "how do I <a href="http://lintool.github.io/MapReduceAlgorithms/">implement algorithm X in MapReduce</a>", so aim a big higher.)  </p>
<p>Further cluttering the search space are any number of websites which as near as I can tell exist solely to run Javadoc and stick the results up on the web, which really just pollute the search results. (Similarly, how many bloody ways do we need to get the Hadoop mailing lists on to the web?) These sites seem to offer little over the Apache site and I wish they'd vanish from the search results. </p>
<p>So, now that I've spent a bunch of time explaining what I don't want I should focus on what I do want. 
I'm looking for prose that explains the code of the Hadoop daemons and libraries and how it all fits together. 
What messages are exchanged when a file is opened? How does the scheduler track running jobs, and what classes turn the logic of the operation into something actionable? 
Dropping someone onto the Javadoc of the various classes doesn't help if you don't know how the control flows through the code. </p>
<p>All of this information obviously exists, of course - if nothing else, you can always start at <code>$HADOOP_COMMON_HOME/bin/hadoop-daemon.sh</code> and with a little bit of knowledge of how shell scripts and Java programs are invoked, trace the code from its start on the command line until the operation you want to understand is hit. </p>
<p>There are also many great JIRAs or mailing list entries that have these details, but they're scattered all across the web. I'm looking for somewhere that brings this information together and weaves it together in a coherent story.</p>
<h3>What you'll find in this blog</h3>
<p>I know enough about the Hadoop codebase that I rarely need to start at the command line and trace forward, but there are still many parts of the code that I don't much know and I'm going to need to explore the code and the web to try to understand them. </p>
<p>As I do, I'm going to try to turn my notes into blog posts that show how the parts fit together, in the hopes that someone finds them useful. </p>
<p>I'm someone who doesn't like and can't accept magic. I need to have some idea of how the computer does what we tell it to do. Ruby on Rails, for example, drives me crazy trying to understand just how it works. </p>
<p>I'm a big fan of blog posts and articles that take away that magic and demonstrate how software works. Some things that I really enjoyed:</p>
<ul>
<li>
<p><a href="http://darynholmes.wordpress.com/2008/03/15/beginners-tutorial-routing-in-rails-20-with-rest-part-1-of-n/">RESTful routing in Rails</a> - a 10 part series on how Rails actually handles requests, constructed from the bottom up</p>
</li>
<li>
<p><a href="http://blip.tv/pycon-us-videos-2009-2010-2011/pycon-2011-reverse-engineering-ian-bicking-s-brain-inside-pip-and-virtualenv-4899496">Virtualenv in Python, from scratch</a> a talk from PyCon a few years back. <a href="http://eli.thegreenplace.net/2013/04/20/bootstrapping-virtualenv/">Eli Bendersky's version</a> is pretty good, too (in fact, everything Eli writes is pretty awesome) </p>
</li>
<li>
<p>Closer to Hadoop, Chris Zheng's <a href="http://blog.zhengdong.me/2011/12/29/hadoop-rpc-client-2/">Hadoop RPC Client</a> walkthrough is good, though unfortunately already dated. </p>
</li>
</ul>
<p>Taking on a larger scope, Robert Love's <a href="http://www.amazon.com/Linux-Kernel-Development-Robert-Love/dp/0672329468">Linux Kernel Development</a> book is a good example of what I wish existed for Hadoop. </p>
<h3>Some warnings</h3>
<p>So, gentle reader, a few things to know before we get too far into this.</p>
<p>First, I will swear frequently in my posts.</p>
<p>Second, I fucking <strong>hate</strong> Java. <a href="http://steve-yegge.blogspot.com/2006/03/execution-in-kingdom-of-nouns.html">Steve Yegge is spot-on.</a> Not only do I not like the language, I dislike most of the tools. Eclipse is slow and clunky, and I have no idea why Maven downloads as much stuff as it does.</p>
<p>Third, I don't post on any sort of a regular schedule, and I'm likely to cover only some parts of Hadoop. I'm interested in the data storage parts of Hadoop - the NameNode, the DataNodes, the RPC systems. I'm not especially interested in the process execution side like MapReduce and YARN. So, while I'd love for there to be a Hadoop Internals book, I don't expect that I'll ever have enough material to be the guy who writes it. </p>
<p>Finally, I only care about the trunk of Hadoop. Cloudera did an <a href="http://blog.cloudera.com/blog/2012/04/apache-hadoop-versions-looking-ahead-3/">April Fools' Day blog post</a> on Hadoop versioning that might have hit a little too close to home for some of the Hadoop developers. To minimize confusion, I'm going to stick to the trunk of the Hadoop source code and not try to get into the various distributions. </p>
<h3>Colophon</h3>
<p>At the moment, this blog is hosted as static pages on github.</p>
<p>The static site generator is <a href="http://blog.getpelican.com/">Pelican</a></p>
<p>The theme is a <a href="https://github.com/duilio/pelican-octopress-theme">port of default Octopress theme to Pelican</a> by Maurizio Sambati. It also includes patches from <a href="http://jakevdp.github.io/blog/2013/05/07/migrating-from-octopress-to-pelican/">Jake Vanderplas</a>, as well as a few shortcuts from his Makefile for publishing and his pelican plugins to support his patches. Jake's work on integrating IPython notebooks are what sold me on Pelican in the first place, so I'm especially grateful for his work. </p>
<p>Several posts will use <a href="https://github.com/sudar/gist-it">Gist-it</a> by Sudar Muthu, which is an awesome tool that runs on Google App Engine, and lets you embed specific sections of files on Github (say lines 30 to 50 of <code>foo.java</code>) into a document, without having to copy that code into a stand-alone gist. At the moment it only links to files, and not specific versions of the file, which might make things problematic later but should be an easy fix if and when that day comes.</p>
        </div>

        <div class="meta">
            <div>
            </div>
        </div>
    </article>
</div>

<style type="text/css">
{
    max-width: 700px;
}

.text_cell .prompt {
    display: none;
}

div.cell {
    padding: 0;
}

div.text_cell_render {
    padding: 0;
}

div.prompt {
    font-size: 13px;
}

div.input_prompt {
    padding: .7em 0.2em;
}

div.output_prompt {
    padding: .4em .2em;
}

div.input_area {
    margin: .2em 0.4em;
    max-width: 580px;
}

table.dataframe {
    font-family: Arial, sans-serif;
    font-size: 13px;
    line-height: 20px;
}

table.dataframe th, td {
    padding: 4px;
    text-align: left;
}

pre code {
    background-color: inherit;
}</style>

        </div>
    </body>
</html>